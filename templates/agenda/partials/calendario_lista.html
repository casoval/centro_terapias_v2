<div class="bg-white rounded-lg shadow-lg overflow-hidden border">
    <!-- Header con estilo uniforme -->
    <div class="px-5 py-3 border-b border-gray-100 bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md relative overflow-hidden">
        <div class="absolute top-0 right-0 -mt-2 -mr-2 w-24 h-24 bg-white opacity-10 rounded-full blur-xl"></div>
        <div class="absolute bottom-0 left-0 -mb-2 -ml-2 w-16 h-16 bg-white opacity-10 rounded-full blur-lg"></div>
        
        <div class="relative z-10 flex items-center justify-between gap-4">
            <!-- Icono y t√≠tulo -->
            <div class="flex items-center gap-3">
                <div class="text-4xl font-black tracking-tight leading-none opacity-95">
                    üìã
                </div>
                <div class="h-10 w-px bg-white/30"></div>
            </div>
            
            <!-- Informaci√≥n de vista -->
            <div class="flex-1">
                <div class="text-lg font-bold capitalize tracking-wide opacity-90 leading-tight">
                    Lista de Sesiones
                </div>
                <div class="text-xs font-medium uppercase tracking-wider opacity-75">
                    {% if page_obj %}
                        Mostrando {{ page_obj.start_index }} a {{ page_obj.end_index }} de {{ page_obj.paginator.count }} sesiones
                    {% else %}
                        Total: {{ sesiones|length }} sesiones
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Filtros de periodo y cantidad -->
    <div class="p-3 bg-gray-100 border-b">

        <!-- ‚úÖ FILTROS DE PERIODO Y CANTIDAD -->
        <form method="get" class="flex flex-wrap gap-2 items-end">
            <!-- Mantener par√°metros existentes -->
            <input type="hidden" name="vista" value="lista">
            {% if request.GET.estado %}
            <input type="hidden" name="estado" value="{{ request.GET.estado }}">
            {% endif %}
            {% if request.GET.paciente %}
            <input type="hidden" name="paciente" value="{{ request.GET.paciente }}">
            {% endif %}
            {% if request.GET.profesional %}
            <input type="hidden" name="profesional" value="{{ request.GET.profesional }}">
            {% endif %}
            {% if request.GET.servicio %}
            <input type="hidden" name="servicio" value="{{ request.GET.servicio }}">
            {% endif %}
            {% if request.GET.sucursal %}
            <input type="hidden" name="sucursal" value="{{ request.GET.sucursal }}">
            {% endif %}
            {% if request.GET.tipo_sesion %}
            <input type="hidden" name="tipo_sesion" value="{{ request.GET.tipo_sesion }}">
            {% endif %}

            <div class="flex-1 min-w-[150px]">
                <label class="block text-xs font-medium text-gray-700 mb-1">üìÖ Desde</label>
                <input type="date" 
                       name="fecha_desde" 
                       value="{{ request.GET.fecha_desde }}"
                       class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>

            <div class="flex-1 min-w-[150px]">
                <label class="block text-xs font-medium text-gray-700 mb-1">üìÖ Hasta</label>
                <input type="date" 
                       name="fecha_hasta" 
                       value="{{ request.GET.fecha_hasta }}"
                       class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- ‚úÖ NUEVO: Selector de cantidad por p√°gina -->
            <div class="min-w-[120px]">
                <label class="block text-xs font-medium text-gray-700 mb-1">üìä Mostrar</label>
                <select name="por_pagina" 
                        class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="25" {% if por_pagina == "25" %}selected{% endif %}>25 por p√°gina</option>
                    <option value="50" {% if por_pagina == "50" %}selected{% endif %}>50 por p√°gina</option>
                    <option value="100" {% if por_pagina == "100" %}selected{% endif %}>100 por p√°gina</option>
                    <option value="200" {% if por_pagina == "200" %}selected{% endif %}>200 por p√°gina</option>
                </select>
            </div>

            <button type="submit" 
                    class="px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition">
                üîç Aplicar
            </button>

            {% if request.GET.fecha_desde or request.GET.fecha_hasta %}
            <a href="?vista=lista&por_pagina={{ por_pagina }}" 
               class="px-4 py-1.5 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded-lg transition">
                ‚úï Limpiar fechas
            </a>
            {% endif %}
        </form>
    </div>

    {% if sesiones %}
    <!-- ‚úÖ TABLA DE SESIONES -->
    <div class="overflow-x-auto">
        <table class="w-full min-w-max">
            <thead class="bg-gray-100 border-b sticky top-0 z-10">
                <tr>
                    <th class="px-3 py-1.5 text-left text-[9px] font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap">
                        Fecha
                    </th>
                    <th class="px-3 py-1.5 text-left text-[9px] font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap">
                        Horario
                    </th>
                    <th class="px-3 py-1.5 text-left text-[9px] font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap">
                        Paciente
                    </th>
                    <th class="px-3 py-1.5 text-left text-[9px] font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap">
                        Servicio
                    </th>
                    <th class="px-3 py-1.5 text-left text-[9px] font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap">
                        Profesional
                    </th>
                    <th class="px-3 py-1.5 text-left text-[9px] font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap">
                        Sucursal
                    </th>
                    <th class="px-3 py-1.5 text-left text-[9px] font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap">
                        Estado
                    </th>
                    <th class="px-3 py-1.5 text-left text-[9px] font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap">
                        Monto
                    </th>
                    <th class="px-3 py-1.5 text-left text-[9px] font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap">
                        Pago
                    </th>
                    <th class="px-3 py-1.5 text-left text-[9px] font-medium text-gray-700 uppercase tracking-wider whitespace-nowrap">
                        Acciones
                    </th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                {% for sesion in sesiones %}
                <tr id="sesion-{{ sesion.id }}" class="hover:bg-gray-50 transition">
                    <td class="px-3 py-2 whitespace-nowrap text-[10px] text-gray-900">
                        {{ sesion.fecha|date:"d/m/Y" }}
                    </td>
                    <td class="px-3 py-2 whitespace-nowrap text-[10px] text-gray-900 font-semibold">
                        {{ sesion.hora_inicio|time:"g:i A" }} - {{ sesion.hora_fin|time:"g:i A" }}
                        <div class="text-[8px] text-gray-500">{{ sesion.duracion_minutos }}m</div>
                    </td>
                    <td class="px-3 py-2 text-[10px] text-gray-900 whitespace-nowrap">
                        <div class="flex items-center gap-1">
                            <span>{{ sesion.paciente.nombre }} {{ sesion.paciente.apellido }}</span>
                            {% if sesion.proyecto %}
                            <span class="inline-block px-1 py-0.5 bg-purple-100 border border-purple-300 rounded text-[8px] font-bold text-purple-700" title="Proyecto: {{ sesion.proyecto.codigo }} - {{ sesion.proyecto.nombre }}">
                                üì¶
                            </span>
                            {% endif %}
                            <!-- üí≥ INDICADOR DE MENSUALIDAD -->
                            {% if sesion.mensualidad %}
                            <span class="inline-block px-1 py-0.5 bg-indigo-100 border border-indigo-300 rounded text-[8px] font-bold text-indigo-700" title="Mensualidad: {{ sesion.mensualidad.codigo }} - {{ sesion.mensualidad.periodo_display }}">
                                üí≥
                            </span>
                            {% endif %}
                        </div>
                    </td>
                    <td class="px-3 py-2 text-[10px] text-gray-600 whitespace-nowrap">
                        <span class="inline-flex items-center gap-0.5">
                            <span class="inline-block w-1.5 h-1.5 rounded-full" style="background-color: {{ sesion.servicio.color }};"></span>
                            {{ sesion.servicio.nombre }}
                        </span>
                    </td>
                    <td class="px-3 py-2 text-[10px] text-gray-600 whitespace-nowrap">
                        {{ sesion.profesional.nombre }} {{ sesion.profesional.apellido }}
                    </td>
                    <td class="px-3 py-2 text-[10px] text-gray-600 whitespace-nowrap">
                        üè¢ {{ sesion.sucursal.nombre }}
                    </td>
                    <td class="px-3 py-2 whitespace-nowrap">
                        {% if sesion.estado == 'programada' %}
                        <span class="px-2 py-0.5 text-[9px] font-medium rounded-full bg-blue-100 text-blue-800">
                            üìÖ Prog.
                        </span>
                        {% elif sesion.estado == 'realizada' %}
                        <span class="px-2 py-0.5 text-[9px] font-medium rounded-full bg-green-100 text-green-800">
                            ‚úÖ Real.
                        </span>
                        {% elif sesion.estado == 'realizada_retraso' %}
                        <span class="px-2 py-0.5 text-[9px] font-medium rounded-full bg-yellow-100 text-yellow-800">
                            üïê Retraso
                        </span>
                        {% elif sesion.estado == 'falta' %}
                        <span class="px-2 py-0.5 text-[9px] font-medium rounded-full bg-red-100 text-red-800">
                            ‚ùå Falta
                        </span>
                        {% elif sesion.estado == 'permiso' %}
                        <span class="px-2 py-0.5 text-[9px] font-medium rounded-full bg-purple-100 text-purple-800">
                            üìã Permiso
                        </span>
                        {% elif sesion.estado == 'cancelada' %}
                        <span class="px-2 py-0.5 text-[9px] font-medium rounded-full bg-gray-100 text-gray-800">
                            üö´ Cancel.
                        </span>
                        {% elif sesion.estado == 'reprogramada' %}
                        <span class="px-2 py-0.5 text-[9px] font-medium rounded-full bg-orange-100 text-orange-800">
                            üîÑ Reprog.
                        </span>
                        {% endif %}
                    </td>
                    <td class="px-3 py-2 whitespace-nowrap text-[10px]">
                        <span class="font-semibold text-gray-900">Bs. {{ sesion.monto_cobrado }}</span>
                    </td>
                    <td class="px-3 py-2 whitespace-nowrap">
                        {% if sesion.monto_cobrado > 0 %}
                            {% if sesion.pagado %}
                            <span class="px-2 py-0.5 text-[9px] font-medium rounded-full bg-green-100 text-green-800">
                                ‚úÖ Pagado
                            </span>
                            {% else %}
                            <span class="px-2 py-0.5 text-[9px] font-medium rounded-full bg-red-100 text-red-800">
                                üí∞ Pend.
                            </span>
                            {% endif %}
                        {% else %}
                        <span class="text-[9px] text-gray-400">-</span>
                        {% endif %}
                    </td>
                    <td class="px-3 py-2 whitespace-nowrap text-[10px]">
                        <div class="flex items-center gap-2">
                            <!-- Bot√≥n editar -->
                            <button hx-get="{% url 'agenda:editar_sesion' sesion.id %}"
                                    hx-target="#modal-content"
                                    hx-swap="innerHTML"
                                    class="text-blue-600 hover:text-blue-900 font-medium transition"
                                    title="Editar">
                                ‚úèÔ∏è
                            </button>
                            
                            <!-- ‚úÖ Bot√≥n eliminar (solo programadas sin pago, SOLO GERENTES Y SUPERADMIN) -->
                            {% if sesion.estado == 'programada' and not sesion.pagos.exists %}
                                {% if user.is_superuser or user.perfil.puede_eliminar_sesiones %}
                                <button onclick="confirmarEliminar(event, {{ sesion.id }}, '{{ sesion.paciente.nombre|escapejs }} {{ sesion.paciente.apellido|escapejs }}', '{{ sesion.servicio.nombre|escapejs }}', '{{ sesion.fecha|date:"d/m/Y" }}', '{{ sesion.hora_inicio|time:"g:i A" }}')"
                                        class="text-red-600 hover:text-red-900 transition"
                                        title="Eliminar sesi√≥n">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                    </svg>
                                </button>
                                {% endif %}
                            {% endif %}
                            
                            {% if sesion.es_ultima_sesion_paciente_servicio %}
                            <span class="ml-1 px-1.5 py-0.5 bg-yellow-100 border border-yellow-400 rounded text-[8px] font-bold text-yellow-800">
                                ‚ö†Ô∏è
                            </span>
                            {% endif %}
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- ‚úÖ PAGINACI√ìN -->
    {% if page_obj %}
    <div class="p-3 bg-gray-50 border-t">
        <div class="flex items-center justify-between">
            <!-- Info de p√°gina -->
            <div class="text-xs text-gray-600">
                P√°gina <span class="font-bold text-gray-900">{{ page_obj.number }}</span> 
                de <span class="font-bold text-gray-900">{{ page_obj.paginator.num_pages }}</span>
                <span class="mx-2">|</span>
                Total: <span class="font-bold text-gray-900">{{ page_obj.paginator.count }}</span> sesiones
            </div>

            <!-- Controles de navegaci√≥n -->
            <div class="flex items-center gap-2">
                {% if page_obj.has_previous %}
                <a href="?vista=lista&page=1&por_pagina={{ por_pagina }}{% if request.GET.fecha_desde %}&fecha_desde={{ request.GET.fecha_desde }}{% endif %}{% if request.GET.fecha_hasta %}&fecha_hasta={{ request.GET.fecha_hasta }}{% endif %}{% if request.GET.estado %}&estado={{ request.GET.estado }}{% endif %}{% if request.GET.paciente %}&paciente={{ request.GET.paciente }}{% endif %}{% if request.GET.profesional %}&profesional={{ request.GET.profesional }}{% endif %}{% if request.GET.servicio %}&servicio={{ request.GET.servicio }}{% endif %}{% if request.GET.sucursal %}&sucursal={{ request.GET.sucursal }}{% endif %}{% if request.GET.tipo_sesion %}&tipo_sesion={{ request.GET.tipo_sesion }}{% endif %}" 
                   class="px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                    ¬´ Primera
                </a>
                <a href="?vista=lista&page={{ page_obj.previous_page_number }}&por_pagina={{ por_pagina }}{% if request.GET.fecha_desde %}&fecha_desde={{ request.GET.fecha_desde }}{% endif %}{% if request.GET.fecha_hasta %}&fecha_hasta={{ request.GET.fecha_hasta }}{% endif %}{% if request.GET.estado %}&estado={{ request.GET.estado }}{% endif %}{% if request.GET.paciente %}&paciente={{ request.GET.paciente }}{% endif %}{% if request.GET.profesional %}&profesional={{ request.GET.profesional }}{% endif %}{% if request.GET.servicio %}&servicio={{ request.GET.servicio }}{% endif %}{% if request.GET.sucursal %}&sucursal={{ request.GET.sucursal }}{% endif %}{% if request.GET.tipo_sesion %}&tipo_sesion={{ request.GET.tipo_sesion }}{% endif %}" 
                   class="px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                    ‚óÄ Anterior
                </a>
                {% else %}
                <span class="px-3 py-1.5 text-xs font-medium text-gray-400 bg-gray-100 border border-gray-200 rounded-lg cursor-not-allowed">
                    ¬´ Primera
                </span>
                <span class="px-3 py-1.5 text-xs font-medium text-gray-400 bg-gray-100 border border-gray-200 rounded-lg cursor-not-allowed">
                    ‚óÄ Anterior
                </span>
                {% endif %}

                <!-- P√°ginas num√©ricas -->
                <div class="hidden sm:flex items-center gap-1">
                    {% for num in page_obj.paginator.page_range %}
                        {% if page_obj.number == num %}
                        <span class="px-3 py-1.5 text-xs font-bold text-white bg-blue-600 border border-blue-600 rounded-lg">
                            {{ num }}
                        </span>
                        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                        <a href="?vista=lista&page={{ num }}&por_pagina={{ por_pagina }}{% if request.GET.fecha_desde %}&fecha_desde={{ request.GET.fecha_desde }}{% endif %}{% if request.GET.fecha_hasta %}&fecha_hasta={{ request.GET.fecha_hasta }}{% endif %}{% if request.GET.estado %}&estado={{ request.GET.estado }}{% endif %}{% if request.GET.paciente %}&paciente={{ request.GET.paciente }}{% endif %}{% if request.GET.profesional %}&profesional={{ request.GET.profesional }}{% endif %}{% if request.GET.servicio %}&servicio={{ request.GET.servicio }}{% endif %}{% if request.GET.sucursal %}&sucursal={{ request.GET.sucursal }}{% endif %}{% if request.GET.tipo_sesion %}&tipo_sesion={{ request.GET.tipo_sesion }}{% endif %}" 
                           class="px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                            {{ num }}
                        </a>
                        {% endif %}
                    {% endfor %}
                </div>

                {% if page_obj.has_next %}
                <a href="?vista=lista&page={{ page_obj.next_page_number }}&por_pagina={{ por_pagina }}{% if request.GET.fecha_desde %}&fecha_desde={{ request.GET.fecha_desde }}{% endif %}{% if request.GET.fecha_hasta %}&fecha_hasta={{ request.GET.fecha_hasta }}{% endif %}{% if request.GET.estado %}&estado={{ request.GET.estado }}{% endif %}{% if request.GET.paciente %}&paciente={{ request.GET.paciente }}{% endif %}{% if request.GET.profesional %}&profesional={{ request.GET.profesional }}{% endif %}{% if request.GET.servicio %}&servicio={{ request.GET.servicio }}{% endif %}{% if request.GET.sucursal %}&sucursal={{ request.GET.sucursal }}{% endif %}{% if request.GET.tipo_sesion %}&tipo_sesion={{ request.GET.tipo_sesion }}{% endif %}" 
                   class="px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                    Siguiente ‚ñ∂
                </a>
                <a href="?vista=lista&page={{ page_obj.paginator.num_pages }}&por_pagina={{ por_pagina }}{% if request.GET.fecha_desde %}&fecha_desde={{ request.GET.fecha_desde }}{% endif %}{% if request.GET.fecha_hasta %}&fecha_hasta={{ request.GET.fecha_hasta }}{% endif %}{% if request.GET.estado %}&estado={{ request.GET.estado }}{% endif %}{% if request.GET.paciente %}&paciente={{ request.GET.paciente }}{% endif %}{% if request.GET.profesional %}&profesional={{ request.GET.profesional }}{% endif %}{% if request.GET.servicio %}&servicio={{ request.GET.servicio }}{% endif %}{% if request.GET.sucursal %}&sucursal={{ request.GET.sucursal }}{% endif %}{% if request.GET.tipo_sesion %}&tipo_sesion={{ request.GET.tipo_sesion }}{% endif %}" 
                   class="px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                    √öltima ¬ª
                </a>
                {% else %}
                <span class="px-3 py-1.5 text-xs font-medium text-gray-400 bg-gray-100 border border-gray-200 rounded-lg cursor-not-allowed">
                    Siguiente ‚ñ∂
                </span>
                <span class="px-3 py-1.5 text-xs font-medium text-gray-400 bg-gray-100 border border-gray-200 rounded-lg cursor-not-allowed">
                    √öltima ¬ª
                </span>
                {% endif %}
            </div>
        </div>
    </div>
    {% endif %}

    <!-- ‚úÖ ESTAD√çSTICAS (solo si hay filtro de fechas) -->
    <div class="p-3 bg-gray-50 border-t">
        {% if request.GET.fecha_desde or request.GET.fecha_hasta %}
            <div class="mb-3">
                <h3 class="text-xs font-bold text-gray-700 mb-2 uppercase">üìä Estad√≠sticas del Periodo</h3>
                <div class="grid grid-cols-4 lg:grid-cols-8 gap-1.5">
                    <div class="text-center p-1.5 bg-white rounded border">
                        <div class="text-base font-bold text-gray-900">{% if page_obj %}{{ page_obj.paginator.count }}{% else %}{{ sesiones|length }}{% endif %}</div>
                        <div class="text-[8px] text-gray-600">Total</div>
                    </div>
                    <div class="text-center p-1.5 bg-blue-50 rounded border border-blue-200">
                        <div class="text-base font-bold text-blue-600">{{ count_programadas }}</div>
                        <div class="text-[8px] text-blue-600">Prog.</div>
                    </div>
                    <div class="text-center p-1.5 bg-green-50 rounded border border-green-200">
                        <div class="text-base font-bold text-green-600">{{ count_realizadas }}</div>
                        <div class="text-[8px] text-green-600">Real.</div>
                    </div>
                    <div class="text-center p-1.5 bg-yellow-50 rounded border border-yellow-200">
                        <div class="text-base font-bold text-yellow-600">{{ count_retraso }}</div>
                        <div class="text-[8px] text-yellow-600">Retraso</div>
                    </div>
                    <div class="text-center p-1.5 bg-red-50 rounded border border-red-200">
                        <div class="text-base font-bold text-red-600">{{ count_falta }}</div>
                        <div class="text-[8px] text-red-600">Faltas</div>
                    </div>
                    <div class="text-center p-1.5 bg-purple-50 rounded border border-purple-200">
                        <div class="text-base font-bold text-purple-600">{{ count_permiso }}</div>
                        <div class="text-[8px] text-purple-600">Permisos</div>
                    </div>
                    <div class="text-center p-1.5 bg-gray-50 rounded border border-gray-200">
                        <div class="text-base font-bold text-gray-600">{{ count_cancelada }}</div>
                        <div class="text-[8px] text-gray-600">Cancel.</div>
                    </div>
                    <div class="text-center p-1.5 bg-orange-50 rounded border border-orange-200">
                        <div class="text-base font-bold text-orange-600">{{ count_reprogramada }}</div>
                        <div class="text-[8px] text-orange-600">Reprog.</div>
                    </div>
                </div>
            </div>

            <!-- ‚úÖ Resumen Financiero - SOLO PARA NO PROFESIONALES -->
            {% if not user.perfil.es_profesional or user.is_superuser %}
            <div>
                <h3 class="text-xs font-bold text-gray-700 mb-2 uppercase">üí∞ Resumen Financiero</h3>
                <div class="grid grid-cols-3 gap-2">
                    <div class="text-center p-2 bg-red-50 rounded border border-red-200">
                        <div class="text-[8px] text-red-600 font-semibold uppercase">Pendientes</div>
                        <div class="text-xs font-bold text-red-700">{{ count_pendientes }}</div>
                        <div class="text-sm font-black text-red-600">Bs. {{ total_pendiente }}</div>
                    </div>
                    <div class="text-center p-2 bg-green-50 rounded border border-green-200">
                        <div class="text-[8px] text-green-600 font-semibold uppercase">Pagados</div>
                        <div class="text-xs font-bold text-green-700">{{ count_pagados }}</div>
                        <div class="text-sm font-black text-green-600">Bs. {{ total_pagado }}</div>
                    </div>
                    <div class="text-center p-2 bg-blue-50 rounded border-2 border-blue-300">
                        <div class="text-[8px] text-blue-700 font-semibold uppercase">Total</div>
                        <div class="text-base font-black text-blue-700">Bs. {{ total_monto }}</div>
                    </div>
                </div>
            </div>
            {% endif %}
        {% else %}
            <div class="text-center py-4 bg-blue-50 border border-blue-200 rounded">
                <div class="text-2xl mb-1">üí°</div>
                <p class="text-xs text-blue-700 font-medium mb-1">
                    Mostrando {% if page_obj %}{{ page_obj.paginator.count }}{% else %}todas las{% endif %} sesiones registradas
                </p>
                {% if page_obj %}
                <p class="text-[10px] text-blue-600">
                    P√°gina {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}
                </p>
                {% endif %}
                <p class="text-[10px] text-gray-500 mt-2">
                    üí° Usa los filtros de fecha arriba para ver estad√≠sticas de un periodo espec√≠fico
                </p>
            </div>
        {% endif %}
    </div>
    {% else %}
    <div class="text-center py-8">
        <div class="text-4xl mb-2">üìã</div>
        <p class="text-base text-gray-500 font-medium">No hay sesiones</p>
        <p class="text-xs text-gray-400 mt-1">Intenta con otro periodo de fechas</p>
    </div>
    {% endif %}
</div>

<style>
/* Hacer scroll horizontal siempre visible */
.overflow-x-auto::-webkit-scrollbar {
    height: 12px;
}
.overflow-x-auto::-webkit-scrollbar-track {
    background: #f1f1f1;
}
.overflow-x-auto::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 6px;
}
.overflow-x-auto::-webkit-scrollbar-thumb:hover {
    background: #555;
}
</style>