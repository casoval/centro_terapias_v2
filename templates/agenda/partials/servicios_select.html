<label class="block text-sm font-medium text-gray-700 mb-2">
    üè• Servicio * <span class="text-xs text-gray-500">(Paso 3)</span>
</label>
<select name="servicio" 
        id="servicio-select"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
        hx-get="{% url 'agenda:profesionales_servicio' %}"
        hx-target="#profesionales-container"
        hx-swap="innerHTML"
        hx-trigger="change"
        hx-include="#sucursal-select"
        onchange="resetearProfesional(); actualizarVistaPrevia();"
        required
        {% if not servicios %}disabled{% endif %}>
    <option value="">{{ servicios|length|yesno:"Seleccione un servicio,No hay servicios disponibles" }}</option>
    {% for ps in servicios %}
    <option value="{{ ps.servicio.id }}" data-duracion="{{ ps.servicio.duracion_minutos }}">
        {{ ps.servicio.nombre }} ({{ ps.servicio.duracion_minutos }} min - Bs. {{ ps.costo_sesion }})
    </option>
    {% endfor %}
</select>
{% if error %}
<p class="text-xs text-red-500 mt-1">‚ùå {{ error }}</p>
{% endif %}

<script>
// Resetear profesional cuando cambia el servicio
function resetearProfesional() {
    const profesionalesContainer = document.getElementById('profesionales-container');
    profesionalesContainer.innerHTML = `
        <label class="block text-sm font-medium text-gray-700 mb-2">
            üë®‚Äç‚öïÔ∏è Profesional * <span class="text-xs text-gray-500">(Paso 4)</span>
        </label>
        <select name="profesional" id="profesional-select" class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100" disabled required>
            <option value="">Cargando profesionales...</option>
        </select>
    `;
}
</script>