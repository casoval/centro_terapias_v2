<label class="block text-sm font-medium text-gray-700 mb-2">
    ğŸ‘¤ Paciente * <span class="text-xs text-gray-500">(Paso 2)</span>
</label>
<select name="paciente" 
        id="paciente-select"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
        hx-get="{% url 'agenda:servicios_paciente' %}"
        hx-target="#servicios-container"
        hx-swap="innerHTML"
        hx-trigger="change"
        hx-include="#sucursal-select"
        onchange="resetearServicioYProfesional()"
        required
        {% if not pacientes %}disabled{% endif %}>
    <option value="">Seleccione un paciente</option>
    {% for paciente in pacientes %}
    <option value="{{ paciente.id }}">{{ paciente.nombre }} {{ paciente.apellido }}</option>
    {% endfor %}
</select>
{% if not pacientes %}
<p class="text-xs text-orange-600 mt-1">âš ï¸ No hay pacientes asignados a esta sucursal</p>
{% else %}
<p class="text-xs text-gray-500 mt-1">ğŸ“Š {{ pacientes|length }} paciente(s) disponible(s)</p>
{% endif %}

<script>
function resetearServicioYProfesional() {
    // Resetear servicio
    document.getElementById('servicios-container').innerHTML = `
        <label class="block text-sm font-medium text-gray-700 mb-2">
            ğŸ¥ Servicio * <span class="text-xs text-gray-500">(Paso 3)</span>
        </label>
        <select name="servicio" id="servicio-select" class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100" disabled required>
            <option value="">Cargando servicios...</option>
        </select>
    `;
    
    // Resetear profesional
    document.getElementById('profesionales-container').innerHTML = `
        <label class="block text-sm font-medium text-gray-700 mb-2">
            ğŸ‘¨â€âš•ï¸ Profesional * <span class="text-xs text-gray-500">(Paso 4)</span>
        </label>
        <select name="profesional" id="profesional-select" class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100" disabled required>
            <option value="">Primero seleccione un servicio</option>
        </select>
    `;
}
</script>